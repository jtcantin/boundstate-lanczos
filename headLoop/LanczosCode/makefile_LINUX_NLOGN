#NOTE: You need to set the following environment variables in nlogn to get ./Lanczos to run:
# export LD_LIBRARY_PATH=/home/pnroy/Dev/lib64:$LD_LIBRARY_PATH
# export LIBRARY_PATH=/home/pnroy/Dev/lib64:$LIBRARY_PATH
CC=/home/pnroy/Dev/bin/g++
FC=/home/pnroy/Dev/bin/gfortran
SUP_PATH1= ../../Hv-calculators/linRotor/cartSphBasis/librarySources/general/
SUP_PATH2= ../../Hv-calculators/linRotor/cartSphBasis/librarySources/vectorClasses/
SUP_PATH3= ../../Hv-calculators/linRotor/cartSphBasis/potentialCalc/CppCode/supportingRoutines/
SUP_PATH4= ./supportingRoutines/
SUP_PATH5= ./
SUP_PATH6= ../../Hv-calculators/linRotor/cartSphBasis/Hv-calc/
INCLUDES= -I $(SUP_PATH1) -I $(SUP_PATH2) -I $(SUP_PATH3) -I $(SUP_PATH4) -I $(SUP_PATH6)
CFLAGS=-c -Wall -fopenmp -DLINUX -O3 -mtune=native $(INCLUDES)
FCFLAGS=-c -DLINUX -O3 -L/home/pnroy/Dev/lib64/ -lblas -llapack -lgfortran -mtune=native $(INCLUDES) 
#FCFLAGS=-static -c -DLINUX -ggdb -O0 -L/home/pnroy/Dev/lib64/ -L/usr/lib/libblas -L/usr/lib/lapack -lblas -llapack -lgfortran $(INCLUDES) 
#FCFLAGS=-c -DLINUX -ggdb -O0 -llapack -lblas -L/home/pnroy/Dev/lib64/ $(INCLUDES) 
LIB_SOURCES= $(SUP_PATH2)Cvectors.cpp $(SUP_PATH2)matvec2.cpp $(SUP_PATH4)bisec.f $(SUP_PATH4)inverr.f $(SUP_PATH4)isoev.f $(SUP_PATH4)trivec.f $(SUP_PATH5)lancbis.cpp $(SUP_PATH4)genran.f $(SUP_PATH4)scalar.f $(SUP_PATH4)sturmi.f $(SUP_PATH4)inverm.f $(SUP_PATH3)Alavi_H2_Routines.cpp $(SUP_PATH3)gridFcns.cpp $(SUP_PATH3)energyRoutines.cpp $(SUP_PATH3)TIP4P_AH2_EngRoutines_Calc.cpp $(SUP_PATH3)rotmat.cpp $(SUP_PATH6)basisFcns.cpp
LDFLAGS=-L/home/pnroy/Dev/lib64/ -fopenmp -lblas -llapack -lgfortran
#LDFLAGS=-static -lblas -llapack -lgfortran -fopenmp -L/home/pnroy/Dev/lib64/ -L/usr/lib/libblas -L/usr/lib/lapack  
#LDFLAGS=-fopenmp -llapack -lblas -L/home/pnroy/Dev/lib64/
SOURCES=lanczosEigenValuesVectors.cpp $(LIB_SOURCES)
SOURCES2 = $(SOURCES:.cpp=.o)
OBJECTS= $(SOURCES2:.f=.o)
EXECUTABLE=LanczosNLOGN

#print_vars:
#	echo $(SOURCES)
#	echo $(SOURCES2)
#	echo $(OBJECTS)

all: $(SOURCES) $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS)
	$(CC)  $(OBJECTS) -o $@ $(LDFLAGS)

.cpp.o:
	$(CC)  $< -o $@ $(CFLAGS)

.f.o:
	$(FC)  $< -o $@ $(FCFLAGS)

clean:
	rm -f $(OBJECTS) $(EXECUTABLE)
